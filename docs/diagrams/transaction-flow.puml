@startuml "Transaction Flow"
title "Transaction Flow"

collections Banks
actor Member
actor Author
boundary Frontend as FE
control Backend as BE
database Database as DB

autonumber
autoactivate on

Member -> FE: Purchase Course
return Instructions
Member -> Banks: Pay
return Receipt
Member -> FE: Payment Confirmation Form
return WhatsApp Link
Member -> Author: Contact WhatsApp
return Reply

autoactivate off
Member -> Author: Upload Receipt
autoactivate on

Author -> FE: View Member Detail
FE -> BE: Load Member Detail
BE -> DB: Query
return data
return data
return Member Detail

Author -> Banks: Verify Payment

autoactivate off

alt Not Confirmed
  Banks --> Author: Payment Not Received
  autoactivate on
  Author -> Member: Contact WhatsApp
  return Reply
else Confirmed
  return Payment Received
  Author -> FE: Approve Payment
  FE -> BE: Action Approve Payment
  BE -> DB: Mutate
  return data

  autoactivate off
  BE -> Member: Notify Email
  autoactivate on

  return data
  return Payment Approval
end

Member -> FE: Consume Course
return Course Content
@enduml
